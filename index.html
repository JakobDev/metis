<!DOCTYPE html><html><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>metis</title><link rel="stylesheet" href="styles.css" type="text/css" /></head><body><div id="container"><div id="main"><nav><h1>metis</h1><h2>Modules</h2><ul><li><a href="module/metis.argparse.html">metis.argparse</a></li><li><a href="module/metis.crypto.sha1.html">metis.crypto.sha1</a></li><li><a href="module/metis.timer.html">metis.timer</a></li></ul></nav><section id="content"><h1 id="github"><a href='https://github.com/SquidDev-CC/metis' title='metis on GitHub'>metis</a></h1>

<p>A collection of useful modules for ComputerCraft/CC: Tweaked. There&#39;s not much rhyme or reason to this really, so feel
free to PR useful libraries you might have.</p>
<h2 id="Usage">Usage</h2><p>Paste the following code block on the top of your program, then feel free to require any of the documented modules.</p>
<pre class="highlight highlight-lua"><span class="keyword">local</span> <span class="ident">modules</span> <span class="symbol">=</span> <span class="symbol">{</span>
  <span class="symbol">[</span><span class="string">"metis.argparse"</span><span class="symbol">]</span> <span class="symbol">=</span> <span class="string">"src/metis/argparse.lua"</span><span class="symbol">,</span>
  <span class="symbol">[</span><span class="string">"metis.crypto.sha1"</span><span class="symbol">]</span> <span class="symbol">=</span> <span class="string">"src/metis/crypto/sha1.lua"</span><span class="symbol">,</span>
  <span class="symbol">[</span><span class="string">"metis.timer"</span><span class="symbol">]</span> <span class="symbol">=</span> <span class="string">"src/metis/timer.lua"</span><span class="symbol">,</span>
<span class="symbol">}</span>
<span class="ident">package</span><span class="symbol">.</span><span class="symbol">loaders</span><span class="symbol">[</span><span class="symbol">#</span><span class="ident">package</span><span class="symbol">.</span><span class="symbol">loaders</span> <span class="symbol">+</span> <span class="number">1</span><span class="symbol">]</span> <span class="symbol">=</span> <span class="keyword">function</span><span class="symbol">(</span><span class="ident">name</span><span class="symbol">)</span>
  <span class="keyword">local</span> <span class="ident">path</span> <span class="symbol">=</span> <span class="ident">modules</span><span class="symbol">[</span><span class="ident">name</span><span class="symbol">]</span>
  <span class="keyword">if</span> <span class="operator-kw">not</span> <span class="ident">path</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal-kw">nil</span><span class="symbol">,</span> <span class="string">"not a metis module"</span> <span class="keyword">end</span>

  <span class="keyword">local</span> <span class="ident">local_path</span> <span class="symbol">=</span> <span class="string">"/.cache/metis/d624683f4e8bfa5da5f838fb142dd294543b1cc4/"</span> <span class="symbol">..</span> <span class="ident">path</span>
  <span class="keyword">if</span> <span class="operator-kw">not</span> <span class="ident">fs</span><span class="symbol">.</span><span class="symbol">exists</span><span class="symbol">(</span><span class="ident">local_path</span><span class="symbol">)</span> <span class="keyword">then</span>
    <span class="keyword">local</span> <span class="ident">url</span> <span class="symbol">=</span> <span class="string">"https://raw.githubusercontent.com/SquidDev-CC/metis/d624683f4e8bfa5da5f838fb142dd294543b1cc4/"</span> <span class="symbol">..</span> <span class="ident">path</span>
    <span class="keyword">local</span> <span class="ident">request</span><span class="symbol">,</span> <span class="ident">err</span> <span class="symbol">=</span> <span class="ident">http</span><span class="symbol">.</span><span class="symbol">get</span><span class="symbol">(</span><span class="ident">url</span><span class="symbol">)</span>
    <span class="keyword">if</span> <span class="operator-kw">not</span> <span class="ident">request</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="literal-kw">nil</span><span class="symbol">,</span> <span class="string">"Cannot download "</span> <span class="symbol">..</span> <span class="ident">url</span> <span class="symbol">..</span> <span class="string">": "</span> <span class="symbol">..</span> <span class="ident">err</span> <span class="keyword">end</span>

    <span class="keyword">local</span> <span class="ident">out</span> <span class="symbol">=</span> <span class="ident">fs</span><span class="symbol">.</span><span class="symbol">open</span><span class="symbol">(</span><span class="ident">local_path</span><span class="symbol">,</span> <span class="string">"w"</span><span class="symbol">)</span>
    <span class="ident">out</span><span class="symbol">.</span><span class="symbol">write</span><span class="symbol">(</span><span class="ident">request</span><span class="symbol">.</span><span class="symbol">readAll</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">)</span>
    <span class="ident">out</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span>

    <span class="ident">request</span><span class="symbol">.</span><span class="symbol">close</span><span class="symbol">(</span><span class="symbol">)</span>
  <span class="keyword">end</span>


  <span class="keyword">local</span> <span class="ident">fn</span><span class="symbol">,</span> <span class="ident">err</span> <span class="symbol">=</span> <span class="ident">loadfile</span><span class="symbol">(</span><span class="ident">local_path</span><span class="symbol">,</span> <span class="literal-kw">nil</span><span class="symbol">,</span> <span class="ident">_ENV</span><span class="symbol">)</span>
  <span class="keyword">if</span> <span class="ident">fn</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="ident">fn</span><span class="symbol">,</span> <span class="ident">local_path</span> <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal-kw">nil</span><span class="symbol">,</span> <span class="ident">err</span> <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="keyword">return</span> <span class="ident">require</span><span class="symbol"></span></pre>

<p>For other ways of using metis, see the <a href='https://github.com/SquidDev-CC/metis' title='metis on GitHub'>github repository</a>.</p>
<table class="definition-list"><tr><th><a href="module/metis.argparse.html">metis.argparse</a></th><td>A really basic argument parser.</td></tr><tr><th><a href="module/metis.crypto.sha1.html">metis.crypto.sha1</a></th><td>Calculate the SHA1 hash for some text.</td></tr><tr><th><a href="module/metis.timer.html">metis.timer</a></th><td>Utilities for working with timers.</td></tr></table></section></div><footer>Last updated on 2020-07-26</footer></div></body></html>